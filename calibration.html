<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="shortcut icon" href="images/logo-white.svg" type="image/svg">

	<title>Calibration | EnvOS</title>
	
	<link rel="stylesheet" href="css/service_pages.css">
</head>
<body>
	<div class="content">
		<h1 style="margin-bottom: 0em;">Calibration menu</h1>
		<span id="id" class="mono">id</span> / 
		<span id="version" class="mono">version</span>
		<br/><br/>

		<div class="block">
			<h3>Values</h3>

			<table class="table table-values">
				<tr>
					<th>Sensor / Type</th>
					<th>Last value</th>
					<th>Avg value</th>
				</tr>
				<tr>
					<td>SDS011 / pm10</td>
					<td>14.45 ug/m3</td>
					<td>12.51 ug/m3</td>
				</tr>
			</table>
		</div>

		<div class="block hide" id="box_mics">
			<h3>MICS</h3>

			<div style="margin-bottom: 0.5em;"><b>Automatic MICS calibration calculation</b></div>

			<table class="table">
				<tr>
					<td style="font-size: small;">Ref NH3 (ppm)</td>
					<td style="font-size: small;">Ref CO (ppm)</td>
					<td style="font-size: small;">Ref NO2 (ppm)</td>
				</tr>
				<tr>
					<td>
						<input class="text-box" type="number" id="ref_nh3" maxlength="5" value="0.050"/>
					</td>
					<td>
						<input class="text-box" type="number" id="ref_co" maxlength="5" value="0.300"/>
					</td>
					<td>
						<input class="text-box" type="number" id="ref_no2" maxlength="5" value="0.020"/>
					</td>
				</tr>
			</table><br/>

			<button id="calculate_mics">Calculate</button><br/>

			<hr>

			<table class="table">
				<tr>
					<td>A0 (NH3)</td>
					<td><input class="text-box" type="number" name="mics_a0" id="mics_a0" maxlength="5" placeholder="a0" /></td>
				</tr>
				<tr>
					<td>A1 (CO)</td>
					<td><input class="text-box" type="number" name="mics_a1" id="mics_a1" maxlength="5" placeholder="a1" /></td>
				</tr>
				<tr>
					<td>A2 (NO2)</td>
					<td><input class="text-box" type="number" name="mics_a2" id="mics_a2" maxlength="5" placeholder="a2" /></td>
				</tr>
			</table><br/>

			<button id="apply_mics">Apply</button>&nbsp;<span>...</span><br/>
		</div>

		<div class="block hide" id="box_coef">
			<h3>Coefficient</h3>

			<table class="table">
				<tr>
					<td>
						<select name="sensor" id="sensor">
							<!--  -->
						</select>
					</td>
					<td><input type="text" name="type" id="type" placeholder="type"></td>
					<td><input type="text" name="unit" id="unit" placeholder="unit"></td>
				</tr>
				<tr>
					<td>
						<select name="coef_type" id="coef_type">
							<option>lin</option>
							<option>pow</option>
							<option>exp</option>
							<option>log</option>
						</select>
					</td>
					<td><input type="text" name="a" id="a" placeholder="a" value="1"></td></td>
					<td><input type="text" name="b" id="b" placeholder="b"></td></td>
				</tr>
			</table>
			
			<span id="coef_formula" class="mono">formula</span><br/><br/>
			
			<button style="margin-bottom: 0.5em;" id="apply_coef">Apply</button>
			<button id="remove_coef">Remove</button>&nbsp;<span>...</span><br/>
		</div>

		<div class="block">
			<h3>Current coefficients</h3>
			<table class="table-f">
				<tbody id="current_coefs">
					<!--  -->
				</tbody>
			</table>
		</div>

		<div class="block hide">
			<h3>Current settings</h3>
			<textarea class="settings-text" id="settings_json" readonly></textarea>
		</div>

		<div class="mono" style="width: 100%; text-align: center;">C++ для богів, JS для лохів!</div><br/>
	</div>
	
	<script type="module" src="js/utils.js"></script>
	<script type="module" src="js/calibration.js"></script>
</body>
</html>